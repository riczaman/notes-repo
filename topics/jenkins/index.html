
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Personal Technical Notes">
      
      
        <meta name="author" content="Ricky Zaman">
      
      
        <link rel="canonical" href="https://riczaman.github.io/notes-repo/topics/jenkins/">
      
      
        <link rel="prev" href="../..">
      
      
        <link rel="next" href="../docker/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.17">
    
    
      
        <title>Jenkins - Ricky's Notes</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="cyan">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#jenkins-infrastructure" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Ricky&#39;s Notes" class="md-header__button md-logo" aria-label="Ricky's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Ricky's Notes
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Jenkins
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/riczaman/notes-repo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Ricky&#39;s Notes" class="md-nav__button md-logo" aria-label="Ricky's Notes" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Ricky's Notes
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/riczaman/notes-repo" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Topics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Jenkins
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Jenkins
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#jenkins-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins Infrastructure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Jenkins Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jenkins-build-types" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins Build Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkins-gui" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins GUI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-freestyle-jenkins-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up Freestyle Jenkins Projects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkins-filesystem" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins Filesystem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-a-python-build-with-a-github-repo" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up a Python Build with a GitHub Repo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-jenkins-agentsworkers" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up Jenkins Agents/Workers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-jobs-to-agents" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Jobs to Agents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-jenkins-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Jenkins Triggers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-jenkin-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up Jenkin Pipelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkin-pipeline-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkin Pipeline Syntax
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkinsfile" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkinsfile
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings-up-jenkins-agents-on-windows-server" class="md-nav__link">
    <span class="md-ellipsis">
      Settings up Jenkins Agents on Windows Server
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkins-multibranch-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins Multibranch Pipelines
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../docker/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../actions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    GitHub Actions
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#jenkins-infrastructure" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins Infrastructure
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Jenkins Infrastructure">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#jenkins-build-types" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins Build Types
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkins-gui" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins GUI
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-freestyle-jenkins-projects" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up Freestyle Jenkins Projects
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkins-filesystem" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins Filesystem
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-a-python-build-with-a-github-repo" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up a Python Build with a GitHub Repo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-jenkins-agentsworkers" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up Jenkins Agents/Workers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuring-jobs-to-agents" class="md-nav__link">
    <span class="md-ellipsis">
      Configuring Jobs to Agents
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#_1" class="md-nav__link">
    <span class="md-ellipsis">
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#adding-jenkins-triggers" class="md-nav__link">
    <span class="md-ellipsis">
      Adding Jenkins Triggers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#setting-up-jenkin-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      Setting up Jenkin Pipelines
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkin-pipeline-syntax" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkin Pipeline Syntax
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkinsfile" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkinsfile
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#settings-up-jenkins-agents-on-windows-server" class="md-nav__link">
    <span class="md-ellipsis">
      Settings up Jenkins Agents on Windows Server
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#jenkins-multibranch-pipelines" class="md-nav__link">
    <span class="md-ellipsis">
      Jenkins Multibranch Pipelines
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


  <h1>Jenkins</h1>

<p>Automation platform that lets you build, test, and deploy automations using pipelines.</p>
<h2 id="jenkins-infrastructure">Jenkins Infrastructure</h2>
<ul>
<li>Master Server = Controls the pipelines &amp; schedules builds</li>
<li>Agents/Minions Servers = Run the builds </li>
</ul>
<h3 id="jenkins-build-types">Jenkins Build Types</h3>
<ol>
<li>Freestyle Builds - shell scripts that are run on servers based on specific events.</li>
<li>Pipeline Builds - Use Jenkins files to define declaritively on how to deploy the build in different stages.</li>
</ol>
<hr />
<h2 id="jenkins-gui">Jenkins GUI</h2>
<ul>
<li>Manage Jenkins: This contains all of the settings that you need for your Jenins instance such as plugins, global settings, etc.</li>
<li><code>System Configuration/Configure System</code></li>
<li><code>System Configuration/Manage Plugins</code></li>
<li><code>System Configuration/Manage Nodes &amp; Cloud</code>: This is where you setup agents</li>
<li><code>Security/Manage Credentials</code>: This where you store <code>SSH keys</code> or <code>API tokens</code></li>
<li><code>Tools and Actions/Prepare for Shutdown</code>: You need to use this when you are performing and upgrade or maintanence if you just shutdown the server without doing this step then you will interrupt jobs that are running. </li>
</ul>
<hr />
<h2 id="setting-up-freestyle-jenkins-projects">Setting up Freestyle Jenkins Projects</h2>
<ol>
<li>
<p>Go to the Jenkins Dashboard then click on  <strong>New Item</strong>. The two most popular types of projects are <code>freestyle</code> and <code>pipelines</code></p>
</li>
<li>
<p>Pick the type of job and give it a name. <strong>Make sure to not to put spaces in the name</strong></p>
</li>
<li>
<p>From the build options: </p>
<ul>
<li>
<p><code>Source Code Management</code> is usually always <code>Git</code> and Jenkins will pull that repo that is specified here. You also will mention any branches if you need specific ones. </p>
</li>
<li>
<p>Then we have <code>Build Triggers</code>: You would usually using GitHub webhooks but you need to make sure the firewall or port is open on the Jenkins server so that it can work with the webhook. <code>Build Periodically</code> is used to build jobs on a schedule using cron jobs. </p>
</li>
<li>
<p><code>Build Enviornments</code>: Good to select the 'Delete Workspace' option to clean up any artifacts from previous runs</p>
</li>
</ul>
</li>
<li>
<p><code>Build</code>:</p>
<ul>
<li>Most common option is <code>Execute Shell</code></li>
</ul>
</li>
<li>
<p><code>Post-Build</code>: Like email notifications</p>
</li>
<li>
<p>After clicking and saving on the build - from the job dashboard you can click <code>Build Now</code></p>
</li>
</ol>
<p><img alt="Freestyle Jenkins Build GIF" src="/notes-repo/images/first-job.gif" /></p>
<ol>
<li>
<p>Click on <code>Configure</code> from the Build Homepage to change any settings</p>
</li>
<li>
<p><code>Enviornment Variable</code>:</p>
<ul>
<li>To see what env variables your build has access to go to <code>Configure</code> on the build and then scroll to Build Steps and check the <code>Execute Shell</code> step and click on "See the list of available environment variables"</li>
<li><code>Main Enviornment Variables</code>:
        - <code>BUILD_ID</code>: Gives you the current build ID and you can use this for docker images
        - <code>BUILD_URL</code></li>
<li>To see use enviornment variables <code>${VAR_NAME}</code> in your shell script</li>
</ul>
</li>
<li>
<p>Reading Console Output:</p>
<ul>
<li>Any line in the console that is prefixed with a plus sign <code>+</code> means that is a command that is being run</li>
</ul>
</li>
<li>
<p><code>Workspace</code>: If there are files that are created and managed by your build they will show up in Jenkins on the Project homepage under the Workspace folder</p>
</li>
</ol>
<hr />
<h2 id="jenkins-filesystem">Jenkins Filesystem</h2>
<ul>
<li><code>cd /var/jenkins_home</code> this will take you to the home directory of Jenkins on the <strong>Master Server</strong></li>
<li>Within this folder you can navigate to the <code>workspace</code> directory and this is the directory that will contain all of your builds with their job names as the folder name. Within the build folders will be any artifacts of the build.</li>
<li>Within the <strong>jenkins_home</strong> repo also contains other important places to troubleshoot such as:<ul>
<li><code>plugins</code>: Contains a list of all the plugins installed on your Jenkins instance</li>
<li><code>updates</code>: This contains a list of all the updates that happened</li>
<li><code>logs</code>: Houses the log files on the server</li>
</ul>
</li>
</ul>
<h2 id="setting-up-a-python-build-with-a-github-repo">Setting up a Python Build with a GitHub Repo</h2>
<ol>
<li>
<p>Go through the same steps as above when it comes to creating a simple freestyle project but the main thing here is you want to put the GitHub URL in the <code>Source Code Management</code> section. <strong>Note: if the repo is private then you would need to add credentials so Jenkins could clone it but if its public then no credentials are needed</strong></p>
</li>
<li>
<p>Since we want to execute a Python build we need to first make sure Python is installed on our master and Jenkins agents. Can do this by remoting into the server and just running the python command in the shell - <code>python or python3</code></p>
</li>
<li>
<p>Then just run the script from the repo <code>python3 script_name.py</code></p>
</li>
<li>
<p><strong>This is valuable because you can run python jobs via Jenkins anytime you want without having to SSH into servers so if you setup a scheduled build from Jenkins thats linked to a Python script from a repo you can run it fairly smooth</strong></p>
</li>
</ol>
<hr />
<h2 id="setting-up-jenkins-agentsworkers">Setting up Jenkins Agents/Workers</h2>
<ol>
<li>
<p>Go to <code>Manage Jenkins/Nodes</code> and this where you will see the Jenkins Master and Nodes/Agents that are setup
<strong>Configure Cloud</strong> is how you build out cloud agents like Docker to use instead of pernanet ones.</p>
</li>
<li>
<p>To create a <code>Docker</code> agent go to <code>Cloud</code> then go to install plugins which will automatically filter <code>Cloud Providers</code> and install Docker then restart Jenkins</p>
</li>
<li>
<p>You can login to the <code>Master Jenkins Node</code> and go to the logs and plugins folder to also verify if the plugin is installed. Also, <strong>refreshing the Jenkins page might need to be done as the UI will hang on the refresh portion after installing the plugin</strong></p>
</li>
<li>
<p>Now you can go back to the <code>Configure Cloud</code> option under nodes and add Docker.</p>
</li>
<li>
<p>Setting up Docker:</p>
<ul>
<li>Need to provide the <code>Docker Host URI</code> which can be another server or if you want to do it locally you can use Docker Desktop and an alpine image in the URI field need to put in tcp://IPAddress that is generated
  <strong>After entering in the data <code>set it to enabled</code> then <code>test connection</code></strong></li>
</ul>
</li>
<li>
<p>Creating the <code>Docker Agent Template</code>:</p>
<ul>
<li>
<p>Go back into the configured Docker agent and then click on the gear icon and then navigate to <code>Docker Agent Templates</code> and then click on <strong>Add</strong></p>
</li>
<li>
<p>Key Terms:
        - <code>Labels</code>: This is used to help the <strong>Master</strong> node determine which agent to send the build too.
        - <code>Docker Image</code>: This will be the official image that you will be using.
        - <code>Instance Capacity</code>: This defines how much instances of the agent will be created.
        - <code>Remote File System Root</code>: This defines where the workspace for this agent will be created - default: <code>/home/jenkins</code></p>
</li>
</ul>
</li>
</ol>
<hr />
<h2 id="configuring-jobs-to-agents">Configuring Jobs to Agents</h2>
<ol>
<li>
<p>Go to the Job Name then click on "Configure" then under <strong>General</strong> click on the check box for <code>Restrict where this project can run</code> and now put in the name of the <em>docker agent template</em> then click save</p>
</li>
<li>
<p>Now when you build the job it will use the specific agent that you assigned the docker-alpine label too. <strong>Note: It's important that you use the correct image because outdated ones will keep your job in pending state as it won't be able to find a live agent since an incorrect image will lead to provisioning errors</strong></p>
</li>
<li>
<p>For these Docker Jobs on the same screen of the Console Output you will see a tab called <code>Built on Docker</code> which shows the container details. </p>
</li>
<li>
<p>This helps you troubleshoot because some agents might not have the required software like Python3 so if you assign this agent template that does not have python to a build that requires it then it will error out. <strong>In this scenario you should create your own Docker Image that has python installed</strong></p>
</li>
<li>
<p>To create another agent you just need to go back to the <code>Docker Agent Template</code> and then create another template.</p>
</li>
</ol>
<h2 id="_1"><img alt="Cloud Agent Templates" src="/notes-repo/images/cloud-agent.gif" /></h2>
<h2 id="adding-jenkins-triggers">Adding Jenkins Triggers</h2>
<ol>
<li>Build Triggers/<code>Poll SCM</code>: Jenkins Master will periodically check github for any changes and its much easier to manage then setting up webhooks.<ul>
<li>It uses cron notation </li>
</ul>
</li>
</ol>
<hr />
<h2 id="setting-up-jenkin-pipelines">Setting up Jenkin Pipelines</h2>
<ol>
<li>
<p>Similair to how we created freestyle projects you need to go to <code>New Item</code> and then click on <code>Pipeline</code>. You will notice that at the top most of the settings are the same but you have less freedom with pipelines for advanced settings as most of the steps are carried out by the <strong><code>Pipeline Script</code></strong> section.</p>
</li>
<li>
<p>There are two ways to build out the pipeline script and both ways use the <strong><code>Groovy Syntax</code></strong>:</p>
<ul>
<li><code>Directly in the UI</code></li>
<li><code>Jenkinsfile</code></li>
</ul>
</li>
</ol>
<hr />
<h2 id="jenkin-pipeline-syntax">Jenkin Pipeline Syntax</h2>
<ul>
<li>Everything is wrapped in a <code>pipeline</code> parameter {}</li>
<li>First step in the pipeline is to select the <code>agent</code> that will carry out the job and it is specified by the <code>label</code> parameter</li>
<li>Next step is the <code>Stages</code>: This is where you define your stages like building -&gt; testing -&gt; deploying</li>
<li>When you create a Pipeline Build you can see a section for <strong>Pipleline Overview</strong> which will show you all of the stages you built. </li>
</ul>
<hr />
<h2 id="jenkinsfile">Jenkinsfile</h2>
<ul>
<li>
<p>Instead of putting the script directly into the UI of Jenkins you can create a <code>Jenkinsfile</code> within the parent folder of your code repository and then outline all of the deployment steps in this special file</p>
</li>
<li>
<p>Within the Pipeline build in Jenkins, you need to change the pipeline from using <em>Pipeline Script</em> to use <code>Pipeline Script from SCM</code> then add the github repo. <strong>Make sure you put the <code>Jenkinsfile</code> path in the <code>Script Path</code></strong></p>
</li>
<li>
<p>When you get the pipeline from SCM it will add a first step where it sees if it can checkout from SCM without any errors. </p>
</li>
</ul>
<div class="language-groovy highlight"><table class="highlighttable"><tr><th colspan="2" class="filename"><span class="filename">Standardized Jenkinsfile</span></th></tr><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">  1</a></span>
<span class="normal"><a href="#__codelineno-0-2">  2</a></span>
<span class="normal"><a href="#__codelineno-0-3">  3</a></span>
<span class="normal"><a href="#__codelineno-0-4">  4</a></span>
<span class="normal"><a href="#__codelineno-0-5">  5</a></span>
<span class="normal"><a href="#__codelineno-0-6">  6</a></span>
<span class="normal"><a href="#__codelineno-0-7">  7</a></span>
<span class="normal"><a href="#__codelineno-0-8">  8</a></span>
<span class="normal"><a href="#__codelineno-0-9">  9</a></span>
<span class="normal"><a href="#__codelineno-0-10"> 10</a></span>
<span class="normal"><a href="#__codelineno-0-11"> 11</a></span>
<span class="normal"><a href="#__codelineno-0-12"> 12</a></span>
<span class="normal"><a href="#__codelineno-0-13"> 13</a></span>
<span class="normal"><a href="#__codelineno-0-14"> 14</a></span>
<span class="normal"><a href="#__codelineno-0-15"> 15</a></span>
<span class="normal"><a href="#__codelineno-0-16"> 16</a></span>
<span class="normal"><a href="#__codelineno-0-17"> 17</a></span>
<span class="normal"><a href="#__codelineno-0-18"> 18</a></span>
<span class="normal"><a href="#__codelineno-0-19"> 19</a></span>
<span class="normal"><a href="#__codelineno-0-20"> 20</a></span>
<span class="normal"><a href="#__codelineno-0-21"> 21</a></span>
<span class="normal"><a href="#__codelineno-0-22"> 22</a></span>
<span class="normal"><a href="#__codelineno-0-23"> 23</a></span>
<span class="normal"><a href="#__codelineno-0-24"> 24</a></span>
<span class="normal"><a href="#__codelineno-0-25"> 25</a></span>
<span class="normal"><a href="#__codelineno-0-26"> 26</a></span>
<span class="normal"><a href="#__codelineno-0-27"> 27</a></span>
<span class="normal"><a href="#__codelineno-0-28"> 28</a></span>
<span class="normal"><a href="#__codelineno-0-29"> 29</a></span>
<span class="normal"><a href="#__codelineno-0-30"> 30</a></span>
<span class="normal"><a href="#__codelineno-0-31"> 31</a></span>
<span class="normal"><a href="#__codelineno-0-32"> 32</a></span>
<span class="normal"><a href="#__codelineno-0-33"> 33</a></span>
<span class="normal"><a href="#__codelineno-0-34"> 34</a></span>
<span class="normal"><a href="#__codelineno-0-35"> 35</a></span>
<span class="normal"><a href="#__codelineno-0-36"> 36</a></span>
<span class="normal"><a href="#__codelineno-0-37"> 37</a></span>
<span class="normal"><a href="#__codelineno-0-38"> 38</a></span>
<span class="normal"><a href="#__codelineno-0-39"> 39</a></span>
<span class="normal"><a href="#__codelineno-0-40"> 40</a></span>
<span class="normal"><a href="#__codelineno-0-41"> 41</a></span>
<span class="normal"><a href="#__codelineno-0-42"> 42</a></span>
<span class="normal"><a href="#__codelineno-0-43"> 43</a></span>
<span class="normal"><a href="#__codelineno-0-44"> 44</a></span>
<span class="normal"><a href="#__codelineno-0-45"> 45</a></span>
<span class="normal"><a href="#__codelineno-0-46"> 46</a></span>
<span class="normal"><a href="#__codelineno-0-47"> 47</a></span>
<span class="normal"><a href="#__codelineno-0-48"> 48</a></span>
<span class="normal"><a href="#__codelineno-0-49"> 49</a></span>
<span class="normal"><a href="#__codelineno-0-50"> 50</a></span>
<span class="normal"><a href="#__codelineno-0-51"> 51</a></span>
<span class="normal"><a href="#__codelineno-0-52"> 52</a></span>
<span class="normal"><a href="#__codelineno-0-53"> 53</a></span>
<span class="normal"><a href="#__codelineno-0-54"> 54</a></span>
<span class="normal"><a href="#__codelineno-0-55"> 55</a></span>
<span class="normal"><a href="#__codelineno-0-56"> 56</a></span>
<span class="normal"><a href="#__codelineno-0-57"> 57</a></span>
<span class="normal"><a href="#__codelineno-0-58"> 58</a></span>
<span class="normal"><a href="#__codelineno-0-59"> 59</a></span>
<span class="normal"><a href="#__codelineno-0-60"> 60</a></span>
<span class="normal"><a href="#__codelineno-0-61"> 61</a></span>
<span class="normal"><a href="#__codelineno-0-62"> 62</a></span>
<span class="normal"><a href="#__codelineno-0-63"> 63</a></span>
<span class="normal"><a href="#__codelineno-0-64"> 64</a></span>
<span class="normal"><a href="#__codelineno-0-65"> 65</a></span>
<span class="normal"><a href="#__codelineno-0-66"> 66</a></span>
<span class="normal"><a href="#__codelineno-0-67"> 67</a></span>
<span class="normal"><a href="#__codelineno-0-68"> 68</a></span>
<span class="normal"><a href="#__codelineno-0-69"> 69</a></span>
<span class="normal"><a href="#__codelineno-0-70"> 70</a></span>
<span class="normal"><a href="#__codelineno-0-71"> 71</a></span>
<span class="normal"><a href="#__codelineno-0-72"> 72</a></span>
<span class="normal"><a href="#__codelineno-0-73"> 73</a></span>
<span class="normal"><a href="#__codelineno-0-74"> 74</a></span>
<span class="normal"><a href="#__codelineno-0-75"> 75</a></span>
<span class="normal"><a href="#__codelineno-0-76"> 76</a></span>
<span class="normal"><a href="#__codelineno-0-77"> 77</a></span>
<span class="normal"><a href="#__codelineno-0-78"> 78</a></span>
<span class="normal"><a href="#__codelineno-0-79"> 79</a></span>
<span class="normal"><a href="#__codelineno-0-80"> 80</a></span>
<span class="normal"><a href="#__codelineno-0-81"> 81</a></span>
<span class="normal"><a href="#__codelineno-0-82"> 82</a></span>
<span class="normal"><a href="#__codelineno-0-83"> 83</a></span>
<span class="normal"><a href="#__codelineno-0-84"> 84</a></span>
<span class="normal"><a href="#__codelineno-0-85"> 85</a></span>
<span class="normal"><a href="#__codelineno-0-86"> 86</a></span>
<span class="normal"><a href="#__codelineno-0-87"> 87</a></span>
<span class="normal"><a href="#__codelineno-0-88"> 88</a></span>
<span class="normal"><a href="#__codelineno-0-89"> 89</a></span>
<span class="normal"><a href="#__codelineno-0-90"> 90</a></span>
<span class="normal"><a href="#__codelineno-0-91"> 91</a></span>
<span class="normal"><a href="#__codelineno-0-92"> 92</a></span>
<span class="normal"><a href="#__codelineno-0-93"> 93</a></span>
<span class="normal"><a href="#__codelineno-0-94"> 94</a></span>
<span class="normal"><a href="#__codelineno-0-95"> 95</a></span>
<span class="normal"><a href="#__codelineno-0-96"> 96</a></span>
<span class="normal"><a href="#__codelineno-0-97"> 97</a></span>
<span class="normal"><a href="#__codelineno-0-98"> 98</a></span>
<span class="normal"><a href="#__codelineno-0-99"> 99</a></span>
<span class="normal"><a href="#__codelineno-0-100">100</a></span>
<span class="normal"><a href="#__codelineno-0-101">101</a></span>
<span class="normal"><a href="#__codelineno-0-102">102</a></span>
<span class="normal"><a href="#__codelineno-0-103">103</a></span>
<span class="normal"><a href="#__codelineno-0-104">104</a></span>
<span class="normal"><a href="#__codelineno-0-105">105</a></span>
<span class="normal"><a href="#__codelineno-0-106">106</a></span>
<span class="normal"><a href="#__codelineno-0-107">107</a></span>
<span class="normal"><a href="#__codelineno-0-108">108</a></span>
<span class="normal"><a href="#__codelineno-0-109">109</a></span>
<span class="normal"><a href="#__codelineno-0-110">110</a></span>
<span class="normal"><a href="#__codelineno-0-111">111</a></span>
<span class="normal"><a href="#__codelineno-0-112">112</a></span>
<span class="normal"><a href="#__codelineno-0-113">113</a></span>
<span class="normal"><a href="#__codelineno-0-114">114</a></span>
<span class="normal"><a href="#__codelineno-0-115">115</a></span>
<span class="normal"><a href="#__codelineno-0-116">116</a></span>
<span class="normal"><a href="#__codelineno-0-117">117</a></span>
<span class="normal"><a href="#__codelineno-0-118">118</a></span>
<span class="normal"><a href="#__codelineno-0-119">119</a></span>
<span class="normal"><a href="#__codelineno-0-120">120</a></span>
<span class="normal"><a href="#__codelineno-0-121">121</a></span>
<span class="normal"><a href="#__codelineno-0-122">122</a></span>
<span class="normal"><a href="#__codelineno-0-123">123</a></span>
<span class="normal"><a href="#__codelineno-0-124">124</a></span>
<span class="normal"><a href="#__codelineno-0-125">125</a></span>
<span class="normal"><a href="#__codelineno-0-126">126</a></span>
<span class="normal"><a href="#__codelineno-0-127">127</a></span>
<span class="normal"><a href="#__codelineno-0-128">128</a></span>
<span class="normal"><a href="#__codelineno-0-129">129</a></span>
<span class="normal"><a href="#__codelineno-0-130">130</a></span>
<span class="normal"><a href="#__codelineno-0-131">131</a></span>
<span class="normal"><a href="#__codelineno-0-132">132</a></span>
<span class="normal"><a href="#__codelineno-0-133">133</a></span>
<span class="normal"><a href="#__codelineno-0-134">134</a></span>
<span class="normal"><a href="#__codelineno-0-135">135</a></span>
<span class="normal"><a href="#__codelineno-0-136">136</a></span>
<span class="normal"><a href="#__codelineno-0-137">137</a></span>
<span class="normal"><a href="#__codelineno-0-138">138</a></span>
<span class="normal"><a href="#__codelineno-0-139">139</a></span>
<span class="normal"><a href="#__codelineno-0-140">140</a></span>
<span class="normal"><a href="#__codelineno-0-141">141</a></span>
<span class="normal"><a href="#__codelineno-0-142">142</a></span></pre></div></td><td class="code"><div><pre><span></span><code><span id="__span-0-1"><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="n">pipeline</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-2"><a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="w">    </span><span class="n">agent</span><span class="w"> </span><span class="n">any</span><span class="w">  </span><span class="c1">// Use any available Jenkins agent/node</span>
</span><span id="__span-0-3"><a id="__codelineno-0-3" name="__codelineno-0-3"></a>
</span><span id="__span-0-4"><a id="__codelineno-0-4" name="__codelineno-0-4"></a><span class="w">    </span><span class="c1">// Parameters allow customization without changing the Jenkinsfile</span>
</span><span id="__span-0-5"><a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="w">    </span><span class="n">parameters</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-6"><a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="w">        </span><span class="n">string</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;GIT_REPO&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">defaultValue:</span><span class="w"> </span><span class="s1">&#39;https://github.com/your-org/your-repo.git&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">description:</span><span class="w"> </span><span class="s1">&#39;GitHub repository URL&#39;</span><span class="o">)</span>
</span><span id="__span-0-7"><a id="__codelineno-0-7" name="__codelineno-0-7"></a><span class="w">        </span><span class="n">string</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;GIT_BRANCH&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">defaultValue:</span><span class="w"> </span><span class="s1">&#39;develop&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">description:</span><span class="w"> </span><span class="s1">&#39;Git branch to build&#39;</span><span class="o">)</span>
</span><span id="__span-0-8"><a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="w">        </span><span class="n">string</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;GITHUB_CREDENTIALS_ID&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">defaultValue:</span><span class="w"> </span><span class="s1">&#39;github-credentials-id&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">description:</span><span class="w"> </span><span class="s1">&#39;Jenkins credentials ID for GitHub access&#39;</span><span class="o">)</span>
</span><span id="__span-0-9"><a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="w">        </span><span class="n">string</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;SONARQUBE_PROJECT_KEY&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">defaultValue:</span><span class="w"> </span><span class="s1">&#39;my-app&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">description:</span><span class="w"> </span><span class="s1">&#39;SonarQube project key&#39;</span><span class="o">)</span>
</span><span id="__span-0-10"><a id="__codelineno-0-10" name="__codelineno-0-10"></a><span class="w">        </span><span class="n">string</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;SONARQUBE_TOKEN&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">defaultValue:</span><span class="w"> </span><span class="s1">&#39;sonarqube-token-id&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">description:</span><span class="w"> </span><span class="s1">&#39;Jenkins credentials ID for SonarQube token&#39;</span><span class="o">)</span>
</span><span id="__span-0-11"><a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="w">        </span><span class="n">choice</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;BUILD_ENV&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">choices:</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;dev&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;qa&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;prod&#39;</span><span class="o">],</span><span class="w"> </span><span class="nl">description:</span><span class="w"> </span><span class="s1">&#39;Deployment environment&#39;</span><span class="o">)</span>
</span><span id="__span-0-12"><a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-13"><a id="__codelineno-0-13" name="__codelineno-0-13"></a>
</span><span id="__span-0-14"><a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="w">    </span><span class="n">environment</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-15"><a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="w">        </span><span class="c1">// Common environment variables for builds</span>
</span><span id="__span-0-16"><a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="w">        </span><span class="n">NODE_VERSION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;18&#39;</span>
</span><span id="__span-0-17"><a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="w">        </span><span class="n">JAVA_VERSION</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;17&#39;</span>
</span><span id="__span-0-18"><a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="w">        </span><span class="n">MAVEN_HOME</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">tool</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;Maven 3&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">type:</span><span class="w"> </span><span class="s1">&#39;maven&#39;</span>
</span><span id="__span-0-19"><a id="__codelineno-0-19" name="__codelineno-0-19"></a><span class="w">        </span><span class="c1">// This assumes Jenkins SonarQube plugin is configured as &quot;sonarqube&quot;</span>
</span><span id="__span-0-20"><a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="w">        </span><span class="n">SONARQUBE_ENV</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;sonarqube&#39;</span>
</span><span id="__span-0-21"><a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-22"><a id="__codelineno-0-22" name="__codelineno-0-22"></a>
</span><span id="__span-0-23"><a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="w">    </span><span class="n">triggers</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-24"><a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="w">        </span><span class="c1">// Automatically build when there are new commits in the repo</span>
</span><span id="__span-0-25"><a id="__codelineno-0-25" name="__codelineno-0-25"></a><span class="w">        </span><span class="n">pollSCM</span><span class="o">(</span><span class="s1">&#39;H/5 * * * *&#39;</span><span class="o">)</span><span class="w"> </span><span class="c1">// Every 5 minutes</span>
</span><span id="__span-0-26"><a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-27"><a id="__codelineno-0-27" name="__codelineno-0-27"></a>
</span><span id="__span-0-28"><a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="w">    </span><span class="n">stages</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-29"><a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Checkout&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-30"><a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="w">            </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-31"><a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="w">                </span><span class="c1">// Clone code from GitHub using stored credentials</span>
</span><span id="__span-0-32"><a id="__codelineno-0-32" name="__codelineno-0-32"></a><span class="w">                </span><span class="n">git</span><span class="w"> </span><span class="nl">branch:</span><span class="w"> </span><span class="s2">&quot;${params.GIT_BRANCH}&quot;</span><span class="o">,</span>
</span><span id="__span-0-33"><a id="__codelineno-0-33" name="__codelineno-0-33"></a><span class="w">                    </span><span class="nl">credentialsId:</span><span class="w"> </span><span class="s2">&quot;${params.GITHUB_CREDENTIALS_ID}&quot;</span><span class="o">,</span>
</span><span id="__span-0-34"><a id="__codelineno-0-34" name="__codelineno-0-34"></a><span class="w">                    </span><span class="nl">url:</span><span class="w"> </span><span class="s2">&quot;${params.GIT_REPO}&quot;</span>
</span><span id="__span-0-35"><a id="__codelineno-0-35" name="__codelineno-0-35"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-36"><a id="__codelineno-0-36" name="__codelineno-0-36"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-37"><a id="__codelineno-0-37" name="__codelineno-0-37"></a>
</span><span id="__span-0-38"><a id="__codelineno-0-38" name="__codelineno-0-38"></a><span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Set Up Node&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-39"><a id="__codelineno-0-39" name="__codelineno-0-39"></a><span class="w">            </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-40"><a id="__codelineno-0-40" name="__codelineno-0-40"></a><span class="w">                </span><span class="c1">// Install Node version for frontend builds</span>
</span><span id="__span-0-41"><a id="__codelineno-0-41" name="__codelineno-0-41"></a><span class="w">                </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-42"><a id="__codelineno-0-42" name="__codelineno-0-42"></a><span class="s2">                    echo &quot;Setting up Node.js ${NODE_VERSION}&quot;</span>
</span><span id="__span-0-43"><a id="__codelineno-0-43" name="__codelineno-0-43"></a><span class="s2">                    nvm install ${NODE_VERSION}</span>
</span><span id="__span-0-44"><a id="__codelineno-0-44" name="__codelineno-0-44"></a><span class="s2">                    nvm use ${NODE_VERSION}</span>
</span><span id="__span-0-45"><a id="__codelineno-0-45" name="__codelineno-0-45"></a><span class="s2">                &quot;&quot;&quot;</span>
</span><span id="__span-0-46"><a id="__codelineno-0-46" name="__codelineno-0-46"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-47"><a id="__codelineno-0-47" name="__codelineno-0-47"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-48"><a id="__codelineno-0-48" name="__codelineno-0-48"></a>
</span><span id="__span-0-49"><a id="__codelineno-0-49" name="__codelineno-0-49"></a><span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Set Up Java&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-50"><a id="__codelineno-0-50" name="__codelineno-0-50"></a><span class="w">            </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-51"><a id="__codelineno-0-51" name="__codelineno-0-51"></a><span class="w">                </span><span class="c1">// Configure Java for backend builds</span>
</span><span id="__span-0-52"><a id="__codelineno-0-52" name="__codelineno-0-52"></a><span class="w">                </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;java -version&quot;</span>
</span><span id="__span-0-53"><a id="__codelineno-0-53" name="__codelineno-0-53"></a><span class="w">                </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;javac -version&quot;</span>
</span><span id="__span-0-54"><a id="__codelineno-0-54" name="__codelineno-0-54"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-55"><a id="__codelineno-0-55" name="__codelineno-0-55"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-56"><a id="__codelineno-0-56" name="__codelineno-0-56"></a>
</span><span id="__span-0-57"><a id="__codelineno-0-57" name="__codelineno-0-57"></a><span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Install Frontend Dependencies&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-58"><a id="__codelineno-0-58" name="__codelineno-0-58"></a><span class="w">            </span><span class="n">when</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">fileExists</span><span class="o">(</span><span class="s1">&#39;frontend/package.json&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-0-59"><a id="__codelineno-0-59" name="__codelineno-0-59"></a><span class="w">            </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-60"><a id="__codelineno-0-60" name="__codelineno-0-60"></a><span class="w">                </span><span class="n">dir</span><span class="o">(</span><span class="s1">&#39;frontend&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-61"><a id="__codelineno-0-61" name="__codelineno-0-61"></a><span class="w">                    </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;npm install&quot;</span>
</span><span id="__span-0-62"><a id="__codelineno-0-62" name="__codelineno-0-62"></a><span class="w">                </span><span class="o">}</span>
</span><span id="__span-0-63"><a id="__codelineno-0-63" name="__codelineno-0-63"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-64"><a id="__codelineno-0-64" name="__codelineno-0-64"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-65"><a id="__codelineno-0-65" name="__codelineno-0-65"></a>
</span><span id="__span-0-66"><a id="__codelineno-0-66" name="__codelineno-0-66"></a><span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Build Backend&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-67"><a id="__codelineno-0-67" name="__codelineno-0-67"></a><span class="w">            </span><span class="n">when</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">fileExists</span><span class="o">(</span><span class="s1">&#39;backend/pom.xml&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-0-68"><a id="__codelineno-0-68" name="__codelineno-0-68"></a><span class="w">            </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-69"><a id="__codelineno-0-69" name="__codelineno-0-69"></a><span class="w">                </span><span class="n">dir</span><span class="o">(</span><span class="s1">&#39;backend&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-70"><a id="__codelineno-0-70" name="__codelineno-0-70"></a><span class="w">                    </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;${MAVEN_HOME}/bin/mvn clean install -DskipTests&quot;</span>
</span><span id="__span-0-71"><a id="__codelineno-0-71" name="__codelineno-0-71"></a><span class="w">                </span><span class="o">}</span>
</span><span id="__span-0-72"><a id="__codelineno-0-72" name="__codelineno-0-72"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-73"><a id="__codelineno-0-73" name="__codelineno-0-73"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-74"><a id="__codelineno-0-74" name="__codelineno-0-74"></a>
</span><span id="__span-0-75"><a id="__codelineno-0-75" name="__codelineno-0-75"></a><span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Run Unit Tests&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-76"><a id="__codelineno-0-76" name="__codelineno-0-76"></a><span class="w">            </span><span class="n">parallel</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-77"><a id="__codelineno-0-77" name="__codelineno-0-77"></a><span class="w">                </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Frontend Tests&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-78"><a id="__codelineno-0-78" name="__codelineno-0-78"></a><span class="w">                    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">fileExists</span><span class="o">(</span><span class="s1">&#39;frontend/package.json&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-0-79"><a id="__codelineno-0-79" name="__codelineno-0-79"></a><span class="w">                    </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-80"><a id="__codelineno-0-80" name="__codelineno-0-80"></a><span class="w">                        </span><span class="n">dir</span><span class="o">(</span><span class="s1">&#39;frontend&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-81"><a id="__codelineno-0-81" name="__codelineno-0-81"></a><span class="w">                            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;npm test&quot;</span>
</span><span id="__span-0-82"><a id="__codelineno-0-82" name="__codelineno-0-82"></a><span class="w">                        </span><span class="o">}</span>
</span><span id="__span-0-83"><a id="__codelineno-0-83" name="__codelineno-0-83"></a><span class="w">                    </span><span class="o">}</span>
</span><span id="__span-0-84"><a id="__codelineno-0-84" name="__codelineno-0-84"></a><span class="w">                </span><span class="o">}</span>
</span><span id="__span-0-85"><a id="__codelineno-0-85" name="__codelineno-0-85"></a><span class="w">                </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Backend Tests&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-86"><a id="__codelineno-0-86" name="__codelineno-0-86"></a><span class="w">                    </span><span class="n">when</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">expression</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">fileExists</span><span class="o">(</span><span class="s1">&#39;backend/pom.xml&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">}</span>
</span><span id="__span-0-87"><a id="__codelineno-0-87" name="__codelineno-0-87"></a><span class="w">                    </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-88"><a id="__codelineno-0-88" name="__codelineno-0-88"></a><span class="w">                        </span><span class="n">dir</span><span class="o">(</span><span class="s1">&#39;backend&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-89"><a id="__codelineno-0-89" name="__codelineno-0-89"></a><span class="w">                            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;${MAVEN_HOME}/bin/mvn test&quot;</span>
</span><span id="__span-0-90"><a id="__codelineno-0-90" name="__codelineno-0-90"></a><span class="w">                        </span><span class="o">}</span>
</span><span id="__span-0-91"><a id="__codelineno-0-91" name="__codelineno-0-91"></a><span class="w">                    </span><span class="o">}</span>
</span><span id="__span-0-92"><a id="__codelineno-0-92" name="__codelineno-0-92"></a><span class="w">                </span><span class="o">}</span>
</span><span id="__span-0-93"><a id="__codelineno-0-93" name="__codelineno-0-93"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-94"><a id="__codelineno-0-94" name="__codelineno-0-94"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-95"><a id="__codelineno-0-95" name="__codelineno-0-95"></a>
</span><span id="__span-0-96"><a id="__codelineno-0-96" name="__codelineno-0-96"></a><span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;SonarQube Analysis&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-97"><a id="__codelineno-0-97" name="__codelineno-0-97"></a><span class="w">            </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-98"><a id="__codelineno-0-98" name="__codelineno-0-98"></a><span class="w">                </span><span class="n">withSonarQubeEnv</span><span class="o">(</span><span class="s2">&quot;${SONARQUBE_ENV}&quot;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-99"><a id="__codelineno-0-99" name="__codelineno-0-99"></a><span class="w">                    </span><span class="n">withCredentials</span><span class="o">([</span><span class="n">string</span><span class="o">(</span><span class="nl">credentialsId:</span><span class="w"> </span><span class="s2">&quot;${params.SONARQUBE_TOKEN}&quot;</span><span class="o">,</span><span class="w"> </span><span class="nl">variable:</span><span class="w"> </span><span class="s1">&#39;SONAR_TOKEN&#39;</span><span class="o">)])</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-100"><a id="__codelineno-0-100" name="__codelineno-0-100"></a><span class="w">                        </span><span class="n">dir</span><span class="o">(</span><span class="s1">&#39;backend&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-101"><a id="__codelineno-0-101" name="__codelineno-0-101"></a><span class="w">                            </span><span class="c1">// You can run separate Sonar scans for frontend/backend if needed</span>
</span><span id="__span-0-102"><a id="__codelineno-0-102" name="__codelineno-0-102"></a><span class="w">                            </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-103"><a id="__codelineno-0-103" name="__codelineno-0-103"></a><span class="s2">                                ${MAVEN_HOME}/bin/mvn sonar:sonar \</span>
</span><span id="__span-0-104"><a id="__codelineno-0-104" name="__codelineno-0-104"></a><span class="s2">                                    -Dsonar.projectKey=${params.SONARQUBE_PROJECT_KEY} \</span>
</span><span id="__span-0-105"><a id="__codelineno-0-105" name="__codelineno-0-105"></a><span class="s2">                                    -Dsonar.login=$SONAR_TOKEN</span>
</span><span id="__span-0-106"><a id="__codelineno-0-106" name="__codelineno-0-106"></a><span class="s2">                            &quot;&quot;&quot;</span>
</span><span id="__span-0-107"><a id="__codelineno-0-107" name="__codelineno-0-107"></a><span class="w">                        </span><span class="o">}</span>
</span><span id="__span-0-108"><a id="__codelineno-0-108" name="__codelineno-0-108"></a><span class="w">                    </span><span class="o">}</span>
</span><span id="__span-0-109"><a id="__codelineno-0-109" name="__codelineno-0-109"></a><span class="w">                </span><span class="o">}</span>
</span><span id="__span-0-110"><a id="__codelineno-0-110" name="__codelineno-0-110"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-111"><a id="__codelineno-0-111" name="__codelineno-0-111"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-112"><a id="__codelineno-0-112" name="__codelineno-0-112"></a>
</span><span id="__span-0-113"><a id="__codelineno-0-113" name="__codelineno-0-113"></a><span class="w">        </span><span class="n">stage</span><span class="o">(</span><span class="s1">&#39;Conditional Deployment&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-114"><a id="__codelineno-0-114" name="__codelineno-0-114"></a><span class="w">            </span><span class="n">when</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-115"><a id="__codelineno-0-115" name="__codelineno-0-115"></a><span class="w">                </span><span class="n">anyOf</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-116"><a id="__codelineno-0-116" name="__codelineno-0-116"></a><span class="w">                    </span><span class="n">branch</span><span class="w"> </span><span class="nl">pattern:</span><span class="w"> </span><span class="s2">&quot;feature/.*&quot;</span><span class="o">,</span><span class="w"> </span><span class="nl">comparator:</span><span class="w"> </span><span class="s2">&quot;REGEXP&quot;</span>
</span><span id="__span-0-117"><a id="__codelineno-0-117" name="__codelineno-0-117"></a><span class="w">                    </span><span class="n">branch</span><span class="w"> </span><span class="nl">pattern:</span><span class="w"> </span><span class="s2">&quot;hotfix/.*&quot;</span><span class="o">,</span><span class="w"> </span><span class="nl">comparator:</span><span class="w"> </span><span class="s2">&quot;REGEXP&quot;</span>
</span><span id="__span-0-118"><a id="__codelineno-0-118" name="__codelineno-0-118"></a><span class="w">                    </span><span class="n">branch</span><span class="w"> </span><span class="s1">&#39;main&#39;</span>
</span><span id="__span-0-119"><a id="__codelineno-0-119" name="__codelineno-0-119"></a><span class="w">                    </span><span class="n">branch</span><span class="w"> </span><span class="s1">&#39;develop&#39;</span>
</span><span id="__span-0-120"><a id="__codelineno-0-120" name="__codelineno-0-120"></a><span class="w">                </span><span class="o">}</span>
</span><span id="__span-0-121"><a id="__codelineno-0-121" name="__codelineno-0-121"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-122"><a id="__codelineno-0-122" name="__codelineno-0-122"></a><span class="w">            </span><span class="n">steps</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-123"><a id="__codelineno-0-123" name="__codelineno-0-123"></a><span class="w">                </span><span class="n">sh</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
</span><span id="__span-0-124"><a id="__codelineno-0-124" name="__codelineno-0-124"></a><span class="s2">                    echo &quot;Deploying to ${params.BUILD_ENV} environment&quot;</span>
</span><span id="__span-0-125"><a id="__codelineno-0-125" name="__codelineno-0-125"></a><span class="s2">                    # Add deployment scripts or commands here</span>
</span><span id="__span-0-126"><a id="__codelineno-0-126" name="__codelineno-0-126"></a><span class="s2">                &quot;&quot;&quot;</span>
</span><span id="__span-0-127"><a id="__codelineno-0-127" name="__codelineno-0-127"></a><span class="w">            </span><span class="o">}</span>
</span><span id="__span-0-128"><a id="__codelineno-0-128" name="__codelineno-0-128"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-129"><a id="__codelineno-0-129" name="__codelineno-0-129"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-130"><a id="__codelineno-0-130" name="__codelineno-0-130"></a>
</span><span id="__span-0-131"><a id="__codelineno-0-131" name="__codelineno-0-131"></a><span class="w">    </span><span class="n">post</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-132"><a id="__codelineno-0-132" name="__codelineno-0-132"></a><span class="w">        </span><span class="n">success</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-133"><a id="__codelineno-0-133" name="__codelineno-0-133"></a><span class="w">            </span><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;Pipeline completed successfully.&quot;</span>
</span><span id="__span-0-134"><a id="__codelineno-0-134" name="__codelineno-0-134"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-135"><a id="__codelineno-0-135" name="__codelineno-0-135"></a><span class="w">        </span><span class="n">failure</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-136"><a id="__codelineno-0-136" name="__codelineno-0-136"></a><span class="w">            </span><span class="n">echo</span><span class="w"> </span><span class="s2">&quot;Pipeline failed. Check logs for details.&quot;</span>
</span><span id="__span-0-137"><a id="__codelineno-0-137" name="__codelineno-0-137"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-138"><a id="__codelineno-0-138" name="__codelineno-0-138"></a><span class="w">        </span><span class="n">always</span><span class="w"> </span><span class="o">{</span>
</span><span id="__span-0-139"><a id="__codelineno-0-139" name="__codelineno-0-139"></a><span class="w">            </span><span class="n">cleanWs</span><span class="o">()</span><span class="w"> </span><span class="c1">// Clean workspace after build</span>
</span><span id="__span-0-140"><a id="__codelineno-0-140" name="__codelineno-0-140"></a><span class="w">        </span><span class="o">}</span>
</span><span id="__span-0-141"><a id="__codelineno-0-141" name="__codelineno-0-141"></a><span class="w">    </span><span class="o">}</span>
</span><span id="__span-0-142"><a id="__codelineno-0-142" name="__codelineno-0-142"></a><span class="o">}</span>
</span></code></pre></div></td></tr></table></div>
<hr />
<h2 id="settings-up-jenkins-agents-on-windows-server">Settings up Jenkins Agents on Windows Server</h2>
<ul>
<li>Need to make sure the version of Java that you install on the Windows Server is the same one that is installed on the Jenkins Controller</li>
<li>To find the version, go to <code>Manage Jenkins</code> then go to <code>System Information</code> and search for <strong>java.home</strong></li>
<li>
<p>Adding these Nodes:</p>
<ol>
<li>Click on Manage Configurations and then go to Nodes and create a new node</li>
<li>Provide a name and then click on <code>Permanent</code> this it is not a cloud or dynamic server.</li>
<li>The remote root directory will be a path on the server: <code>d:\tools\jenkins-agent</code></li>
<li>If you leave the <code>label</code> blank it will take on the name of the agent.</li>
<li>Usage needs to be set as only when using the label name</li>
<li>
<p><code>Websocket</code> If you don't select this option then you need to just make sure you open a specific port on the agent so that it can communicate with the master via <code>tcp</code>. When you save this in the Jenkins Master it will save the connection type but will be marked with a red X because you need to connect the agent to the master. <strong>If you click on the red X it will give you commands to run on the agent</strong></p>
</li>
<li>
<p>For exectuable services you can leverage <code>WinSW</code> which is a wrapper for any executable so that it can be run as a Windows Service</p>
<ul>
<li>The way this works is you rename the WinSW ex as your jenkins agent and then need an xml file that defines what it runs</li>
<li>The arguments in the xml come from the Jenkins UI when you click on the red X</li>
<li>The agent.jar also comes from this locaton after you click on the red X</li>
<li>After you start the service then it will connect to the master</li>
</ul>
</li>
</ol>
</li>
</ul>
<hr />
<h2 id="jenkins-multibranch-pipelines">Jenkins Multibranch Pipelines</h2>
<ol>
<li>
<p>Creating a <code>GitHub App</code>: Go to GitHub and click on Settings then go to Developer Settings then create the GitHub App and Set the permissions. Then set the subscribe events like push, repository, and other events.</p>
</li>
<li>
<p>To add credentials in Jenkins: Click on <code>Manage Jenkins\Credentials</code> then click on the Global one and then add credential and add for a GitHub app.
<strong>PAT (personal access token) gives you a lot less GitHub limits whereas a GitHub app lets you call to GitHub a lot more</strong></p>
</li>
<li>
<p>Create a new item and select <code>Multi-Branch Pipeline</code>:</p>
<ul>
<li>For branch sources select GitHub</li>
<li><em>If you dont have a Jenkinsfile then there will be no build configuration since you are selecting builds based on this type of file</em></li>
</ul>
</li>
<li>
<p>The way the multibranch pipeline works is that Jenkins scans the repo for every branch name and allows you to see that in the app homepage view:</p>
<ul>
<li><code>On Different Branches you can modify the Jenkinsfile so that different things can be carried out</code></li>
</ul>
</li>
</ol>
<p>For Example, you can create stages in the pipeline based on a specific type of branch
<div class="language-text highlight"><pre><span></span><code><span id="__span-1-1"><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a>stage(&#39;fix branch){
</span><span id="__span-1-2"><a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a>  when{
</span><span id="__span-1-3"><a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a>    branch &quot;fix-*&quot;
</span><span id="__span-1-4"><a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>  }
</span><span id="__span-1-5"><a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>  steps{
</span><span id="__span-1-6"><a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a>    sh ```
</span><span id="__span-1-7"><a id="__codelineno-1-7" name="__codelineno-1-7" href="#__codelineno-1-7"></a>    cat README.md
</span><span id="__span-1-8"><a id="__codelineno-1-8" name="__codelineno-1-8" href="#__codelineno-1-8"></a>    ```
</span><span id="__span-1-9"><a id="__codelineno-1-9" name="__codelineno-1-9" href="#__codelineno-1-9"></a>  }
</span><span id="__span-1-10"><a id="__codelineno-1-10" name="__codelineno-1-10" href="#__codelineno-1-10"></a>}
</span><span id="__span-1-11"><a id="__codelineno-1-11" name="__codelineno-1-11" href="#__codelineno-1-11"></a>
</span><span id="__span-1-12"><a id="__codelineno-1-12" name="__codelineno-1-12" href="#__codelineno-1-12"></a>stage(&#39;merge pr){
</span><span id="__span-1-13"><a id="__codelineno-1-13" name="__codelineno-1-13" href="#__codelineno-1-13"></a>  when{
</span><span id="__span-1-14"><a id="__codelineno-1-14" name="__codelineno-1-14" href="#__codelineno-1-14"></a>    branch &quot;pr-*&quot;
</span><span id="__span-1-15"><a id="__codelineno-1-15" name="__codelineno-1-15" href="#__codelineno-1-15"></a>  }
</span><span id="__span-1-16"><a id="__codelineno-1-16" name="__codelineno-1-16" href="#__codelineno-1-16"></a>  steps{
</span><span id="__span-1-17"><a id="__codelineno-1-17" name="__codelineno-1-17" href="#__codelineno-1-17"></a>    echo &quot;this is for prs&quot;
</span><span id="__span-1-18"><a id="__codelineno-1-18" name="__codelineno-1-18" href="#__codelineno-1-18"></a>  }
</span><span id="__span-1-19"><a id="__codelineno-1-19" name="__codelineno-1-19" href="#__codelineno-1-19"></a>}
</span></code></pre></div></p>
<ol>
<li><code>Dealing with Pull Requests</code>: Now you need to create a PR to merge this branch back into the <code>main</code> which will in this scenario also update the root jenkins file so going forward each type of branch will have a specific pathway<ul>
<li>Pull Requests also show up in the Jenkins build page for the multibranch pipeline</li>
<li><strong>Any PR or branch that has a strikethough means that it was already <code>merged and then the branch deleted</code> so it no longer exists</strong> These go away next time a scan occurs</li>
</ul>
</li>
</ol>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.copy", "content.code.select", "content.code.annotate"], "search": "../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.92b07e13.min.js"></script>
      
        <script src="../../javascripts/extra.js"></script>
      
    
  </body>
</html>